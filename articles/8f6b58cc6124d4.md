---
title: "GitHub Actionsã®å°å…¥æ–¹æ³•"
emoji: "ğŸ™Œ"
type: "tech"
topics:
  - "githubactions"
published: true
published_at: "2024-03-14 22:55"
---

# GitHub Actionsã¨ã¯ï¼Ÿ
>GitHub Actions ã¯ã€ãƒ“ãƒ«ãƒ‰ã€ãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è‡ªå‹•åŒ–ã§ãã‚‹ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ç¶™ç¶šçš„ãƒ‡ãƒªãƒãƒªãƒ¼ (CI/CD) ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ ãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã™ã‚‹ã™ã¹ã¦ã® pull request ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ãƒ†ã‚¹ãƒˆã—ãŸã‚Šã€ãƒãƒ¼ã‚¸ã•ã‚ŒãŸ pull request ã‚’é‹ç”¨ç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚Šã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚
>
>GitHub Actions ã¯ã€DevOps ã§ã‚ã‚‹ã ã‘ã§ãªãã€ãƒªãƒã‚¸ãƒˆãƒªã§ä»–ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã¨ãã«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚ ãŸã¨ãˆã°ã€ãƒªãƒã‚¸ãƒˆãƒªã§æ–°ã—ã„ issue ãŒä½œæˆã•ã‚Œã‚‹ãŸã³ã«ã€é©åˆ‡ãªãƒ©ãƒ™ãƒ«ã‚’è‡ªå‹•çš„ã«è¿½åŠ ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚
>
>GitHub ã§ã¯ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã® Linuxã€Windowsã€macOS ä»®æƒ³ãƒã‚·ãƒ³ãŒæä¾›ã•ã‚Œã¾ã™ã€‚ã¾ãŸã€è‡ªèº«ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼ã¾ãŸã¯ã‚¯ãƒ©ã‚¦ãƒ‰ ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã§ç‹¬è‡ªã®ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆ ãƒ©ãƒ³ãƒŠãƒ¼ã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

https://docs.github.com/ja/actions
# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
å°å…¥ã—ãŸã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® .git ãŒã‚ã‚‹éšå±¤ã« `.github/workflows/github-actions.yml`ã‚’ä½œæˆã™ã‚‹ã€‚
â€»`github-actions.yml`ã¯æ‹¡å¼µå­ãŒ .yml ã§ã‚ã‚Œã°ãªã‚“ã§ã‚‚è‰¯ã„ã€‚

ä½œæˆã—ãŸ`github-actions.yml`ã«ä¸‹è¨˜ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã€‚
```yml
name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Check out repository code
        uses: actions/checkout@v4
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - run: echo "ğŸ This job's status is ${{ job.status }}."

```

# å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹
1. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã€ãƒªãƒ¢ãƒ¼ãƒˆã«pushã™ã‚‹
2. githubã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸ã¸é·ç§»ã™ã‚‹
3. Actions ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹
4. æ‰‹é †1ã®ã‚³ãƒŸãƒƒãƒˆIDã¨åŒã˜ã‚‚ã®ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹
5. `Explore-GitHub-Actions`ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹

ä¸‹è¨˜æ·»ä»˜ç”»åƒã®ã‚ˆã†ãªè¡¨ç¤ºã«ãªã£ã¦ã„ã‚Œã°æˆåŠŸ
![](https://storage.googleapis.com/zenn-user-upload/87cfc626660e-20240312.png)

# ï¼ˆå¿œç”¨ï¼‰eslintã‚’èµ°ã‚‰ã›ã‚‹
reviewdogã‚’å…¥ã‚ŒãŸçŠ¶æ…‹ã§ã€èµ°ã‚‰ã›ã¦ã¿ã‚‹ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® eslint ã®ã¿æ¤œè¨¼ã—ãŸã„ã®ã§ã‚ã‚Œã°ã€[å…¬å¼](https://github.com/reviewdog/action-eslint)ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ä¸‹è¨˜ã‚³ãƒ¼ãƒ‰ã€‚
```yaml
name: reviewdog
on: [pull_request]
jobs:
  eslint:
    name: runner / eslint
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
    steps:
      - uses: actions/checkout@v4
      - uses: reviewdog/action-eslint@v1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          reporter: github-pr-review # Change reporter.
          eslint_flags: "src/"
```
ã‚‚ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç‹¬è‡ªã«çµ„ã‚“ã  lint ã‚’åŠ¹ã‹ã›ãŸã„ã®ã§ã‚ã‚Œã°å°‘ã—å·¥å¤«ãŒå¿…è¦ã€‚
```yml:github-actions.yml
name: GitHub Actions # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®åå‰
on:
  pull_request:
    types: [opened, reopened, synchronize] # opened: PRã‚’ä½œæˆ, reopened:PRã‚’Closeã‹ã‚‰Openã«å¤‰æ›´, synchronize: PRã‚’æ›´æ–°
jobs:
  eslint:
    name: eslint
    runs-on: ubuntu-latest # ã‚¸ãƒ§ãƒ–ã‚’å®Ÿè¡Œã™ã‚‹ç’°å¢ƒ
    permissions:
      contents: read
      pull-requests: write
    steps: #ã‚¸ãƒ§ãƒ–å†…ã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚¹ãƒ†ãƒƒãƒ—
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '20.9.0'

    - name: Install Dependencies
      run: npm install

    - name: Initialize Reviewdog
      uses: reviewdog/action-setup@v1
      with:
        reviewdog_version: latest

    - name: Run reviewdog
      run: |
        reviewdog -runners=eslint -reporter=github-pr-check -filter-mode=file
      env:
        REVIEWDOG_GITHUB_API_TOKEN: ${{ secrets.REVIEWDOG_GITHUB_API_TOKEN }}
```
package.json ã¨åŒã˜éšå±¤ã«`.reviewdog.yml`ã‚’ä½œæˆã—ã€ä¸‹è¨˜ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã€‚
```yml:.reviewdog.yml
runner:
  eslint:
    cmd: npm run --silent lint --config ./.eslintrc.cjs
    format: eslint
```
push ã—ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã‘ã‚Œã°æˆåŠŸï¼

ä»¥ä¸Šï¼